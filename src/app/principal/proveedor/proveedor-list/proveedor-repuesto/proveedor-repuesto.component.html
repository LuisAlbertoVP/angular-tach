<mat-spinner *ngIf="isLoading; else elseBlock" color="accent" mode="indeterminate" class="m0-auto"></mat-spinner>
<ng-template #elseBlock>
  <h2 mat-dialog-title class="text-center blue">Documentos de {{ data.descripcion }}</h2>
  <mat-dialog-content class="mat-typography">
    <div class="mat-elevation-z4 m-3 p-3">
      <div *ngIf="compras.length == 0; else elseBlock">
        <b>El proveedor no ha ofrecido ningún repuesto</b>
      </div>
      <ng-template #elseBlock>
        <mat-form-field appearance="fill" class="w-100 mb-2">
          <mat-label>Buscar por número o fecha del documento</mat-label>
          <input matInput [formControl]="search" type="text" autocomplete="off" />
        </mat-form-field>
        <div *ngFor="let compra of compras$ | async">
          <h3 class="d-flex">{{ compra?.tipoDocumento + '# ' + compra?.numero }}
            <span class="ml-auto">{{ sharedService.parseDate(compra.fecha) }}</span></h3>
          <table class="table table-hover">
            <thead class="bg-blue">
              <tr>
                <td>Código</td>
                <td>Categoría</td>
                <td>Marca</td>
                <td>Modelo</td>
                <td>Cantidad</td>
                <td>Precio</td>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let detalle of compra.compraDetalle">
                <td>{{ detalle.repuesto.codigo }}</td>
                <td>{{ detalle.repuesto.categoria.descripcion }}</td>
                <td>{{ detalle.repuesto.marca.descripcion }}</td>
                <td>{{ detalle.repuesto.modelo }}</td>
                <td>{{ detalle.cantidad }}</td>
                <td>{{ detalle.repuesto.precio }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </ng-template>
    </div>
  </mat-dialog-content>
  <div mat-dialog-actions class="ml">
    <button mat-raised-button mat-dialog-close>Cerrar</button>
  </div>
</ng-template>